<h4>Reporte de Tracking por Gestión</h4>
<div class="input-group mb-2" style="max-width:420px">
  <input id="gid" class="form-control" placeholder="Número de gestión">
  <button class="btn btn-primary" onclick="buscar()">Buscar</button>
</div>
<table class="table" id="tb">
  <thead><tr><th>Gestión</th><th>Fecha</th><th>Acción</th><th>Comentario</th><th>Usuario</th></tr></thead>
  <tbody></tbody>
</table>

<script>
function buscar(){
  const id = document.getElementById('gid').value;
  fetch('@Url.Action("Buscar")?gestionId='+id).then(r=>r.json()).then(rows=>{
    const tb = document.querySelector('#tb tbody'); tb.innerHTML='';
    rows.forEach(x=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${x.gestionId}</td><td>${x.fecha}</td><td>${x.accion}</td><td>${x.comentario}</td><td>${x.usuario}</td>`;
      tb.appendChild(tr);
    });
    if(rows.length===0) Swal.fire('Sin datos','No hay tracking para esa gestión','info');
  });
}
</script>
